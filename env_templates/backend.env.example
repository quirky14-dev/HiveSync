# -------------------------------------
# Backend Server Configuration
# -------------------------------------
PORT=4000
BASE_URL=https://your-domain.com

# -------------------------------------
# Database (PostgreSQL)
# -------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=hivesync
POSTGRES_USER=hivesync
POSTGRES_PASSWORD=REPLACE_ME

# -------------------------------------
# Redis (Queue, Session, Rate Limits)
# -------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379

# -------------------------------------
# Security / Auth
# -------------------------------------
# Personal API Token hashing (never store plaintext tokens)
API_TOKEN_PEPPER=REPLACE_ME_WITH_LONG_RANDOM_STRING
AUTH_EMAIL_ENABLED=true
# Google Sign-In
AUTH_GOOGLE_CLIENT_ID=

# Apple Sign-In
AUTH_APPLE_CLIENT_ID=
AUTH_APPLE_TEAM_ID=
AUTH_APPLE_KEY_ID=
AUTH_APPLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----
REPLACE_ME
-----END PRIVATE KEY-----"

JWT_SECRET=REPLACE_ME_WITH_LONG_RANDOM_STRING
SESSION_SECRET=REPLACE_ME_FOR_BROWSER_SESSIONS
# Short-lived browser/session tokens (Desktop + Web Portal only)
SESSION_TOKEN_EXPIRY_SECONDS=120

# Device/session token for mobile/tablet pairing
DEVICE_TOKEN_SECRET=REPLACE_ME_WITH_LONG_RANDOM_STRING

# Worker callback HMAC (shared with workers)
WORKER_CALLBACK_SECRET=REPLACE_ME_WITH_LONG_RANDOM_STRING

# Stateless preview token signing key
PREVIEW_TOKEN_SECRET=REPLACE_ME_WITH_LONG_RANDOM_STRING

# -------------------------------------
# Preview System (Section 12)
# -------------------------------------
PREVIEW_DEVICE_CONTEXT_SECRET=REPLACE_ME
PREVIEW_SENSOR_FEATURES_ENABLED=true
EVENTFLOW_ENABLED=true

# Controls preview timeout on server (in ms)
PREVIEW_MAX_TIMEOUT_MS=8000

# Preview worker callback
WORKER_CALLBACK_URL=https://your-domain.com/api/v1/worker/callback

# -------------------------------------
# Object Storage (Cloudflare R2)
# -------------------------------------
R2_BUCKET=hivesync-storage
R2_ACCESS_KEY=REPLACE_ME
R2_SECRET_KEY=REPLACE_ME
R2_ACCOUNT_ID=REPLACE_ME
R2_ENDPOINT=https://<your-account-id>.r2.cloudflarestorage.com
R2_PUBLIC_BASE_URL=https://pub-xxxxxxxx.r2.dev

# -------------------------------------
# AI Provider
# -------------------------------------
AI_PRIMARY=openai
AI_MODEL=gpt-4.1
OPENAI_API_KEY=REPLACE_ME

# Optional local fallback
LOCAL_AI_ENABLED=false
LOCAL_AI_MODEL_PATH=/models/llama

# -------------------------------------
# Billing / LemonSqueezy
# -------------------------------------
LZ_API_KEY=REPLACE_ME
LZ_STORE_ID=REPLACE_ME
LZ_WEBHOOK_SECRET=REPLACE_ME

# Variant IDs
LZ_PRO_MONTHLY_VARIANT_ID=REPLACE_ME
LZ_PRO_YEARLY_VARIANT_ID=REPLACE_ME
LZ_PREMIUM_MONTHLY_VARIANT_ID=REPLACE_ME
LZ_PREMIUM_YEARLY_VARIANT_ID=REPLACE_ME

# For billing desync correction logic
LS_BILLING_SYNC_ENABLED=true

# -------------------------------------
# Email Provider
# -------------------------------------
EMAIL_PROVIDER=resend
RESEND_API_KEY=REPLACE_ME
POSTMARK_API_KEY=REPLACE_ME  # optional fallback

# -------------------------------------
# Worker Queues
# -------------------------------------
WORKER_PREVIEW_QUEUE=preview_tasks
WORKER_MAP_QUEUE=map_tasks
WORKER_BILLING_QUEUE=billing_tasks
WORKER_DELETION_QUEUE=deletion_tasks

# -------------------------------------
# Dormant Account Cleanup
# -------------------------------------
DORMANT_CLEANUP_CRON="0 3 * * *"

# -------------------------------------
# Logging
# -------------------------------------
LOG_LEVEL=info
SENTRY_DSN=
